function setup(){createCanvas(windowWidth,windowHeight,SVG),numberOfShapes=weightedSelect(shapes_distribution),numberOfSides=weightedSelect(sides_distribution),polygonWeight=weightedSelect(polygon_width_distribution),spiralWeight=weightedSelect(spiral_width_distribution),isDark=1==weightedSelect(color_distribution),timePercentage=randomIntFromInterval(1,99)/100,time=timePercentage*getMaxTimePeriod(numberOfShapes),spacing=.9*(width<height?width:height)/numberOfShapes,0==polygonWeight&&0==spiralWeight&&(spiralWeight=1),0==spiralWeight&&(numberOfSides=randomIntFromInterval(2,10)),generate(numberOfShapes,numberOfSides,time,polygonWeight,spiralWeight,spacing,isDark),noLoop(),defineFeatures(),fxpreview()}function generate(e,i,t,n,r,s=40,a=!1){clear(),resetMatrix(),background(a?"#202020":"#FFF0AD"),noFill(),translate(width/2,height/2);const o=t/(30*e)*.2;let h=[];strokeWeight(n),stroke(a?"#808F87":"#25D0B7");for(var g=0;g<e;g++){const t=o*(e-g),n=s*g;h.push(drawPolygon(i,n,t))}strokeWeight(r),stroke(a?"#ffd100":"#D0253E"),drawSpiral(h),translate(-width/2,-height/2)}function windowResized(){resizeCanvas(windowWidth,windowHeight),spacing=.9*(width<height?width:height)/numberOfShapes,generate(numberOfShapes,numberOfSides,time,polygonWeight,spiralWeight,spacing,isDark)}function defineFeatures(){function e(){return numberOfShapes<22?"normal":numberOfShapes<32?"more":"a lot more"}function i(){return numberOfSides<3?"does this even count?":numberOfSides<8?"few":numberOfSides<32?"normal":numberOfSides<70?"a lot":"infinitely close to a circle"}function t(){return timePercentage<.4?"beginning":timePercentage<.6?"middle":"end"}window.$fxhashFeatures={isDarkish:isDark,"Number of shapes":e(),"Number of sides":i(),"shape weight":polygonWeight,"spiral weight":spiralWeight,"position in time":t()}}function keyPressed(){"s"!=key&&"S"!=key||save(fxhash.toString(),"svg")}let numberOfShapes,numberOfSides,polygonWeight,spiralWeight,isDark,time,timePercentage,spacing;